<html>
<head>
    
    <link rel="stylesheet" type="text/css" href="../GRAPHIX_MP/css/index.css">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    
    <script src="./js/three.js"></script>    
    <script src="./js/GLTFLoader.js"></script>    
<!--    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r79/three.min.js"></script>-->
    <script src="https://threejs.org/examples/js/controls/PointerLockControls.js"></script>
<!--    <script src="https://threejs.org/examples/js/loaders/GLTFLoader.js"></script>-->
    
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

</head>
<body>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
   

    <ul class="nav nav-pills">
        <li><button type="button" class="btn btn-dark" id="instructions">Click for 360 View</button></li>
        
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Change Location</a>
            <div class="dropdown-menu">
              <button type="button" class="dropdown-item" id="changeGrass">Grasslands</button>
              <button type="button" class="dropdown-item" id="changeDessert">Dessert</button>
              <button type="button" class="dropdown-item" id="changeSpace">Space</button>
              <button type="button" class="dropdown-item" id="changeMountain">Mountains</button>
            </div>
        </li>
        
        <li><button type="button" class="btn btn-outline-light">Spawn Sword</button></li>
        <li><button type="button" class="btn btn-outline-light">Spawn Armor</button></li>
        <li><button type="button" class="btn btn-outline-light">Spawn Mace</button></li>
        <li><button type="button" class="btn btn-outline-light">Spawn Axe</button></li>
    </ul>    
  
    <script>    
          var camera, scene, renderer;
          var geometry, material, mesh;
          var controls;

          var havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;
          if (havePointerLock) {
            var element = document.body;
            var pointerlockchange = function(event) {
              if (document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element) {
                controlsEnabled = true;
                controls.enabled = true;
              } else {
                controls.enabled = false;
              }
            };

            // Hook pointer lock state change events
            document.addEventListener('pointerlockchange', pointerlockchange, false);
            document.addEventListener('mozpointerlockchange', pointerlockchange, false);
            document.addEventListener('webkitpointerlockchange', pointerlockchange, false);

            instructions.addEventListener('click', function(event) {

              // Ask the browser to lock the pointer
              if (/Firefox/i.test(navigator.userAgent)) {
                var fullscreenchange = function(event) {
                  element.requestPointerLock();
                };
                document.addEventListener('fullscreenchange', fullscreenchange, false);
                document.addEventListener('mozfullscreenchange', fullscreenchange, false);
                element.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;
                element.requestFullscreen();
              } else {
                element.requestPointerLock();
              }
            }, false);
          } else {
            instructions.innerHTML = 'Your browser doesn\'t seem to support Pointer Lock API';
          }

                
        
          init();
          animate();

        //init
          function init() {
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
            scene = new THREE.Scene();

            //mouse movement
            controls = new THREE.PointerLockControls(camera);

            // cube
            var cube = new THREE.CubeGeometry(1000, 1000, 1000);


            var cubeMaterials = [
              // back side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_bk.jpg'),
                side: THREE.DoubleSide
              }),
              // front side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_ft.jpg'),
                side: THREE.DoubleSide
              }), 
              // Top side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_up.jpg'),
                side: THREE.DoubleSide
              }), 
              // Bottom side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_dn.jpg'),
                side: THREE.DoubleSide
              }), 
              // right side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_lf.jpg'),
                side: THREE.DoubleSide
              }), 
              // left side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_rt.jpg'),
                  
                  
                side: THREE.DoubleSide
              }) 
            ];

            //add cube & materials
            var cubeMaterial = new THREE.MeshFaceMaterial(cubeMaterials);
            var mesh = new THREE.Mesh(cube, cubeMaterial);
            scene.add(mesh);

            //add light
            var ambientLight = new THREE.AmbientLight(0xFFFFFF, 0.5);
            scene.add(ambientLight);
            scene.add(controls.getObject());

            //add mesh
            mesh = new THREE.Mesh(geometry, material);
            scene.add(mesh);
              
            //Add the loader
            var loader = new THREE.GLTFLoader();
            loader.load("./MODELS/playerfinish.glb", handle_load);
             
            function handle_load(gltf){
                mesh = gltf.scene.children[0];
                mesh.material = new THREE.MeshLambertMaterial();
                scene.add(mesh);
                mesh.position.z = -10;
            }

            // Add objects to the scene
            /* geometry = new THREE.BoxGeometry( 20, 20, 20 );
            for ( var i = 0, l = geometry.faces.length; i < l; i ++ ) {
              var face = geometry.faces[ i ];
              face.vertexColors[ 0 ] = new THREE.Color().setHSL( Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
              face.vertexColors[ 1 ] = new THREE.Color().setHSL( Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
              face.vertexColors[ 2 ] = new THREE.Color().setHSL( Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
            }
            for ( var i = 0; i < 500; i ++ ) {
              material = new THREE.MeshPhongMaterial( { specular: 0xffffff, shading: THREE.FlatShading, vertexColors: THREE.VertexColors } );
              var mesh = new THREE.Mesh( geometry, material );
              mesh.position.x = Math.floor( Math.random() * 20 - 10 ) * 20;
              mesh.position.y = Math.floor( Math.random() * 20 ) * 20 + 10;
              mesh.position.z = Math.floor( Math.random() * 20 - 10 ) * 20;
              scene.add( mesh );
              material.color.setHSL( Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75 );
              objects.push( mesh );
            } */
              
            //END OF ADDING OBJECTS  

            renderer = new THREE.WebGLRenderer();
            renderer.setClearColor(0xffffff);
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            window.addEventListener('resize', onWindowResize, false);

          } //end init() 

          //resize window
          function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
          }

          //render
          function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
          }
        
          //Change Grass
          changeGrass.onclick = function(){
              
              var cube = new THREE.CubeGeometry(1000, 1000, 1000);

               var cubeMaterials = [
              // back side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBely_hills/hills_bk.png'),
                side: THREE.DoubleSide
              }),
              // front side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBely_hills/hills_ft.png'),
                side: THREE.DoubleSide
              }), 
              // Top side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBely_hills/hills_up.png'),
                side: THREE.DoubleSide
              }), 
              // Bottom side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBely_hills/hills_dn.png'),
                side: THREE.DoubleSide
              }), 
              // right side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBely_hills/hills_lf.png'),
                side: THREE.DoubleSide
              }), 
              // left side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBely_hills/hills_rt.png'),
                  
                  
                side: THREE.DoubleSide
              }) 
            ];

            //add cube & materials
            var cubeMaterial = new THREE.MeshFaceMaterial(cubeMaterials);
            var mesh = new THREE.Mesh(cube, cubeMaterial);
            scene.add(mesh);
            renderer.render(scene, camera);
              
          }
          
          
          //Change Space
          changeSpace.onclick = function(){
              
              var cube = new THREE.CubeGeometry(1000, 1000, 1000);

               var cubeMaterials = [
              // back side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBcriminal-impact_bk/criminal-impact_ft.jpg'),
                side: THREE.DoubleSide
              }),
              // front side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBcriminal-impact_bk/criminal-impact_bk.jpg'),
                side: THREE.DoubleSide
              }), 
              // Top side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBcriminal-impact_bk/criminal-impact_up.jpg'),
                side: THREE.DoubleSide
              }), 
              // Bottom side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBcriminal-impact_bk/criminal-impact_dn.jpg'),
                side: THREE.DoubleSide
              }), 
              // right side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBcriminal-impact_bk/criminal-impact_rt.jpg'),
                  
                  
                side: THREE.DoubleSide
              }), 
              // left side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBcriminal-impact_bk/criminal-impact_lf.jpg'),
                  
                  
                side: THREE.DoubleSide
              }) 
            ];

            //add cube & materials
            var cubeMaterial = new THREE.MeshFaceMaterial(cubeMaterials);
            var mesh = new THREE.Mesh(cube, cubeMaterial);
            scene.add(mesh);
            renderer.render(scene, camera);
              
          }
          
          //Change background
          changeMountain.onclick = function(){
              
              var cube = new THREE.CubeGeometry(1000, 1000, 1000);

               var cubeMaterials = [
              // back side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBpeaks/peaks_ft.jpg'),
                side: THREE.DoubleSide
              }),
              // front side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBpeaks/peaks_bk.jpg'),
                side: THREE.DoubleSide
              }), 
              // Top side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBpeaks/peaks_up.jpg'),
                side: THREE.DoubleSide
              }), 
              // Bottom side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBpeaks/peaks_dn.jpg'),
                side: THREE.DoubleSide
              }), 
              // right side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBpeaks/peaks_rt.jpg'),
                  
                  
                side: THREE.DoubleSide
              }), 
              // left side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBpeaks/peaks_lf.jpg'),
                  
                  
                side: THREE.DoubleSide
              }) 
            ];

            //add cube & materials
            var cubeMaterial = new THREE.MeshFaceMaterial(cubeMaterials);
            var mesh = new THREE.Mesh(cube, cubeMaterial);
            scene.add(mesh);
            renderer.render(scene, camera);
              
          }
          
          //Change background
          changeDessert.onclick = function(){
              
              var cube = new THREE.CubeGeometry(1000, 1000, 1000);

               var cubeMaterials = [
              // back side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_bk.jpg'),
                side: THREE.DoubleSide
              }),
              // front side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_ft.jpg'),
                side: THREE.DoubleSide
              }), 
              // Top side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_up.jpg'),
                side: THREE.DoubleSide
              }), 
              // Bottom side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_dn.jpg'),
                side: THREE.DoubleSide
              }), 
              // right side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_lf.jpg'),
                side: THREE.DoubleSide
              }), 
              // left side
              new THREE.MeshBasicMaterial({
                map: new THREE.TextureLoader().load('https://raw.githubusercontent.com/gracielnunciob/GRAPHIX_MP/master/SBarrakisday/arrakisday_rt.jpg'),
                  
                  
                side: THREE.DoubleSide
              }) 
            ];

            //add cube & materials
            var cubeMaterial = new THREE.MeshFaceMaterial(cubeMaterials);
            var mesh = new THREE.Mesh(cube, cubeMaterial);
            scene.add(mesh);
            renderer.render(scene, camera);
              
          }
    
    
    </script>
    

 
    
</body>
</html>
