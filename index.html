<html>
	<head>
		<title>My first three.js app</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
        <script src="vanta.waves.min.js"></script>
		<script>
            
			var canvasWidth = 800;
            var canvasHeight = 800;

            var scene,
                distance = 1500,
                meshZOffset = 50,
                fov = 2 * Math.atan(canvasHeight / (2 * (distance - meshZOffset))) * 180 / Math.PI,
                camera = new THREE.PerspectiveCamera(fov, canvasWidth / canvasHeight, 0.1, distance);

            var renderer = new THREE.WebGLRenderer({
              antialias: true,
              alpha: true
            });
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            renderer.setSize(canvasWidth, canvasHeight);
            document.body.appendChild(renderer.domElement);

            var itemMaterial = new THREE.MeshPhongMaterial({
              color: 0x2180ce,
              shininess: 280
            });

            var ambientLight = new THREE.AmbientLight(0xe5e5e5);

            var light = new THREE.PointLight(0xffffff, 1, 0);
            light.position.set(0, 0, 900);
            // var light = new THREE.DirectionalLight(0xffffff, 1);
            // light.position.set(0, 0, distance/4);
            light.castShadow = true;
            light.shadow.camera.near = 1;
            light.shadow.camera.far = distance - 1;
            light.shadow.radius = 10;

            var shadowMaterial = new THREE.ShadowMaterial();
            shadowMaterial.opacity = 0.3;

            var planeGeometry = new THREE.PlaneGeometry(canvasWidth * 2, canvasHeight * 2);
            var shadowPlane = new THREE.Mesh(planeGeometry, shadowMaterial);
            shadowPlane.receiveShadow = true;

            camera.position.z = distance;

            var itemGeometry = new THREE.TorusKnotBufferGeometry(80, 12, 100, 16);

            function addItem(x, y) {
              var item = new THREE.Mesh(itemGeometry, itemMaterial);
              item.position.x = x;
              item.position.y = y;
              item.position.z = meshZOffset;
              item.castShadow = true;
              item.receiveShadow = true;
              scene.add(item);
            }

            scene = new THREE.Scene();
            scene.add(ambientLight);
            scene.add(light);
            scene.add(shadowPlane);
            addItem(-200, 0);
            addItem(200, 0);
            renderer.render(scene, camera);

		</script>
	</body>
</html>